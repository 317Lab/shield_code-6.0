<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shield Code: Shield Code 6.0 Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Shield Code<span id="projectnumber">&#160;6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Shield Code 6.0 Documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Shield Code 6.0</h1>
<p>This project manages the shield firmware for the Lynch Rocket Lab at Dartmouth. The code is designed for a custom PCB modeled off of the Arduino Due, and the code uses the Arduino libraries and framework. The project is built in Platformio, which is the current industry standard for embedded development. This also means the code is in C++, rather than Arduino .ino</p>
<p>The project uses a finite state machine to manage screen voltage sweeps, ADC sampling, IMU sampling, RAM read/writes, and UART communication. This is described in Ruth Nordhoff's thesis, which members of the lab can access <a href="https://drive.google.com/file/d/1XH5SRRh2m84pu7f2B1RSFuYGV1u3EBdw/view?usp=sharing">here</a>.</p>
<p>One major difference in this version of the firmware is that it is entirely object oriented. This is mean to increase data security and make it easier for physicists to modify readable code in <a class="el" href="main_8cpp.html" title="Main file for the 317 lab project.">main.cpp</a> while abstracting more complicated code to libraries. I highly recommend that updates to this firmware maintain the object oriented structure.</p>
<p>Members of the 317 lab can access my notes on designing the board and known problems <a href="https://docs.google.com/document/d/1zxoe2ke9uMofQnCEMGJmY7DL-JV_K1uOB_eNFqKSiaQ/edit?usp=sharing">here</a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Programming the Board</h2>
<p>GSE-D is configured to program the board. Simply cd into the project repository and run</p>
<p>pio run</p>
<p>Make sure you fetch and pull changes from git before programming the board.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Notes and Quirks</h2>
<p>The board uses an external crystal oscillator, rather than the included ceramic oscillator on the Due. This required some changes that are not included in this documentation. First, a <a class="el" href="modded__system__sam3xa_8c.html">modded_system_sam3xa.c</a> file is included in src/ to change the startup clock settings. Then, replace_libsam.py replaces the gcc_rel.a file that contains the precompiled startup code with our modded version. This required manually including the CMSIS libraries in /src/. Due to some interrupt handling business explained in the <a class="el" href="classPDC.html" title="Manages UART transmits through peripheral DMA controller (PDC).">PDC</a> section of the documentation, we have to use a modified version of the Arduino framework, which is stored on my personal repository and included in the platformio configuration file. Whoever replaces me when I graduate should fork this repository to ensure it isn't lost when I lose access to my Dartmouth email.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Documentation</h2>
<p>The documentation is maintained with Doxygen. A workflow in the main branch automatically generates and pushes the documentation to this website. Ensure neither Doxyfile nor layout.xml are removed from the main branch. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
